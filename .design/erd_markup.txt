Table COUNTRY as C{
  id int [pk, increment]
  code varchar
  name varchar
}

Table STATE as S{
  id int [pk, increment]
  country int
  code varchar
}

Ref: S.country > C.id

Table SEX{
  id int [pk, increment]
  name varchar // fill this using fixtures
}

Table USER as U{
  id uuid [pk]
  username varchar
  first_name varchar
  second_name varchar
  surname varchar
  created_at timestamp
}

Table PERSONAL_INFO as PI {
  id int [pk, increment]
  user uuid
  sex int
  birth_date datetime
}

Ref: PI.user - U.id
Ref: PI.sex > SEX.id

Table CONTACT as CO{
  id int [pk, increment]
  user uuid
  email_address varchar
  phone_number varchar
  state int
  address_line_1 varchar
  address_line_2 varchar
}

Ref: CO.user - U.id
Ref: CO.state > S.id

Table PRACTICE as PRA{
  id int [pk, increment]
  name varchar
  state int
  owned_by uuid
}

Ref: PRA.owned_by - U.id
Ref: PRA.state > S.id

Table PROVIDER as PR{
  user uuid
  NPI int [pk]
  practice int
 }

Ref: PR.user - U.id // one-to-one relaionship
Ref: PR.practice > PRA.id // one-to-many relationship
 
Table PATIENT as PA{
  id int [pk]
  user uuid
}

Ref: PA.user - U.id

Table RELATIONSHIP as R{
  id int [pk, increment]
  name varchar // Parent, Sibling, Friend, Other
}

Table EMERGENCY_CONTACT as EC {
  id int [pk, increment]
  patient int
  name varchar // full name
  relationship int
  phone_number varchar
}

Ref: EC.patient > PA.id
Ref: EC.relationship > R.id

Table CASE{
  id int [pk]
  patient id
  intake varchar
  subjective varchar
  objective varchar
  diagnosis varchar
  plan varchar
  created_at timestamp
}

Ref: CASE.patient > PA.id

Table VITAL_TYPE as VLT{
  id int [pk]
  name varchar
}
// Will be filled by fixtures

Table VITAL as VT{
  id int [pk]
  case int
  vital_type int
  reading varchar
}

Ref: VT.case > CASE.id
Ref: VT.vital_type > VLT.id

Table LAB_TYPE as LT{
  id int [pk, increment]
  name varchar
  created_at timestamp
  created_by timestamp
  is_private boolean // False only for default values
}
// fixtures will assign default lab types
// providers can define their own lab types

Table LAB as L{
  id int [pk, increment]
  case int
  lab_type int  //blood-test, X-RAY etc
  remarks varchar
  conducted_by varchar
  created_at timestamp
}

Ref: L.case > CASE.id
Ref: L.lab_type > LT.id

Table ATTACHMENT as A{
  id int [pk]
  lab int
  file varchar // link to a file on a CDN
  created_at timestamp
}

Ref: A.lab > L.id

Table MEDICATION_TYPE as MT{
  id int [pk, increment]
  name varchar
  created_at timestamp
  created_by int // provider
  is_private boolean  // False only for default values
}
// fixtures will assign default medication types
// providers can define their own medication types

Ref: MT.created_by > PR.NPI

Table MEDICATION as M{
  id int [pk, increment]
  case int
  remarks varchar
  medication_type int
  dosage varchar
  created_at timestamp
}

Ref: M.medication_type > MT.id

Ref: M.case > CASE.id

Table VISIT as V{
  id int [pk, increment]
  case int
  agenda varchar // the reason for visiting
  provider uuid
  check_in timestamp
  check_out timestamp
  created_at timestamp
}

Ref: V.case > CASE.id
Ref: V.provider > PR.NPI
